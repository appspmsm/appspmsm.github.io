(this["webpackJsonpapp-vacinas"]=this["webpackJsonpapp-vacinas"]||[]).push([[0],{102:function(e,t,a){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(12),s=a.n(i),c=(a(102),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function r(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,190)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),o(e),i(e),s(e)}))},d=a(40),u=a(11),p=a(6),h=a(168),j=a(166),b=a(167),f=a(46),v=a(172),g=a(169),m=a(170),O=a(163),x=a(173),w=a(2),S=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},buttonProgress:{color:"blue",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"},version:{position:"fixed",bottom:"15px",left:"15px"}}}));var C=function(){var e=S(),t=Object(u.f)(),a=o.a.useState(!1),i=Object(p.a)(a,2),s=i[0],c=i[1],r=o.a.useState(),l=Object(p.a)(r,2),d=l[0],O=l[1];return Object(n.useEffect)((function(){localStorage.setItem("version","1.3.2"),localStorage.setItem("versionDate","14/09/2021");var e=localStorage.getItem("login"),a=localStorage.getItem("token");e&&a&&t.push("/selecao")}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)(j.a,{position:"static",children:Object(w.jsx)(b.a,{children:Object(w.jsx)(f.a,{variant:"h6",className:e.title,children:"Vacina SM"})})}),Object(w.jsxs)(h.a,{children:[Object(w.jsx)(g.a,{}),Object(w.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var a=e.target.elements.user.value,n=e.target.elements.password.value;if(O(null),!s){c(!0);var o=new URLSearchParams;o.append("login",a),o.append("password",n),o.append("type","doLogin"),fetch("https://script.google.com/macros/s/AKfycbxkQf1wEUKHZoB6kbYA_YPHOioUhUAPiW2ctj83G83iNhuvTT9eig_-R38xZkui8Fk_OA/exec",{method:"post",redirect:"follow",body:o}).then((function(e){return e.json().then((function(e){console.log(e),c(!1),e.success?(localStorage.setItem("login",a),localStorage.setItem("token",e.token),t.push("/selecao")):O(e.message)}))})).catch((function(e){console.log(e),c(!1),alert("N\xe3o foi poss\xedvel conectar ao servidor.")}))}},children:[Object(w.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"user",label:"Usu\xe1rio",name:"user",autoComplete:"user",autoFocus:!0,error:!!d}),Object(w.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"current-password",error:!!d,helperText:d||""}),Object(w.jsxs)("div",{className:e.wrapper,children:[Object(w.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:s,className:e.submit,children:"Entrar"}),s&&Object(w.jsx)(x.a,{size:24,className:e.buttonProgress})]})]})]}),Object(w.jsx)("div",{className:e.version,children:"Vers\xe3o 1.3.2 - 14/09/2021"})]})},k=a(128),y=a(182),N=a(121),D=a(126),P=a(123),T=a(189),L=a(177),I=a(178),R=a(179),A=a(180),U=a(181),_=a(174),E=a(175),B=a(176),W=Object(O.a)((function(e){return{title:{flexGrow:1}}}));var $=function(e){var t=W(),a=Object(n.useState)(!1),o=Object(p.a)(a,2),i=o[0],s=o[1],c=Object(n.useState)(!1),r=Object(p.a)(c,2),l=r[0],d=r[1],h=Object(n.useState)(!1),g=Object(p.a)(h,2),m=g[0],O=g[1],x=Object(u.f)();Object(n.useEffect)((function(){e.backButton&&s(!0),e.logoutButton&&d(!0)}),[e.backButton,e.logoutButton]);var S=function(){O(!1)};return Object(w.jsx)(j.a,{position:"static",children:Object(w.jsxs)(b.a,{children:[i?Object(w.jsx)(_.a,{edge:"start",color:"inherit","aria-label":"voltar",onClick:function(){x.goBack()},children:Object(w.jsx)(E.a,{})}):null,Object(w.jsx)(f.a,{variant:"h6",className:t.title,children:"Vacina SM"}),l?Object(w.jsxs)("div",{children:[Object(w.jsx)(_.a,{edge:"end",color:"inherit","aria-label":"sair",onClick:function(){O(!0)},children:Object(w.jsx)(B.a,{})}),Object(w.jsxs)(L.a,{open:m,onClose:S,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(w.jsx)(I.a,{id:"alert-dialog-title",children:"Sair"}),Object(w.jsx)(R.a,{children:Object(w.jsx)(A.a,{id:"alert-dialog-description",children:"Deseja realmente sair?"})}),Object(w.jsxs)(U.a,{children:[Object(w.jsx)(v.a,{onClick:S,color:"primary",children:"Cancelar"}),Object(w.jsx)(v.a,{onClick:function(){O(!1),localStorage.removeItem("token"),x.push("/")},color:"primary",autoFocus:!0,children:"Sair"})]})]})]}):null]})})},F=a(30),Y=Object(O.a)((function(e){return{stepper:{position:"fixed",bottom:0,width:"100%"},buttons:{position:"fixed",bottom:100,right:20},formControl:{margin:e.spacing(1),minWidth:200},buttonConfirmar:{position:"fixed",bottom:100,left:"50%",width:120,"margin-left":"-60px"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var V=function(e){var t=Y(),a=o.a.useState(0),i=Object(p.a)(a,2),s=i[0],c=i[1],r=["Selecione a dose","Selecione o grupo","Selecione a vacina","Selecione o lote","Selecione o local","Selecione o profissional"],l=o.a.useState(""),d=Object(p.a)(l,2),j=d[0],b=d[1],f=o.a.useState(""),m=Object(p.a)(f,2),O=m[0],S=m[1],C=o.a.useState(""),L=Object(p.a)(C,2),I=L[0],R=L[1],A=o.a.useState(""),U=Object(p.a)(A,2),_=U[0],E=U[1],B=o.a.useState(""),W=Object(p.a)(B,2),V=W[0],z=W[1],G=o.a.useState(""),M=Object(p.a)(G,2),X=M[0],Z=M[1],H=o.a.useState(["Primeira","Segunda","Terceira","\xdanica"]),K=Object(p.a)(H,2),q=K[0],Q=(K[1],o.a.useState([])),J=Object(p.a)(Q,2),ee=J[0],te=J[1],ae=o.a.useState([]),ne=Object(p.a)(ae,2),oe=ne[0],ie=ne[1],se=o.a.useState([]),ce=Object(p.a)(se,2),re=ce[0],le=ce[1],de=o.a.useState([]),ue=Object(p.a)(de,2),pe=ue[0],he=ue[1],je=o.a.useState([]),be=Object(p.a)(je,2),fe=be[0],ve=be[1],ge=o.a.useState(!1),me=Object(p.a)(ge,2),Oe=me[0],xe=me[1],we=[j,O,I,_,V,X],Se=Object(u.f)();Object(n.useEffect)((function(){var e=localStorage.getItem("token"),t=new F.a("Cadastros");if(t.version(3).stores({cadastros:"++id, cpf, status",selecao:"++id"}),e){xe(!0);var a=new URLSearchParams;a.append("token",e),a.append("type","getGrupoVacinaLote"),fetch("https://script.google.com/macros/s/AKfycbxkQf1wEUKHZoB6kbYA_YPHOioUhUAPiW2ctj83G83iNhuvTT9eig_-R38xZkui8Fk_OA/exec",{method:"post",redirect:"follow",body:a}).then((function(e){return e.json().then((function(e){console.log(e),xe(!1),e.success?(te(e.grupos.map((function(e){return e[0]})).filter((function(e,t,a){return a.indexOf(e)===t})).sort()),ie(e.vacinas.map((function(e){return e[0]}))),le(e.lotes.map((function(e){return e[0]}))),he(e.locais.map((function(e){return e[0]}))),ve(e.profissionais.map((function(e){return e[0]}))),t.selecao.put({id:0,vacinas:e.vacinas.map((function(e){return e[0]})),lotes:e.lotes.map((function(e){return e[0]})),grupos:e.grupos,locais:e.locais.map((function(e){return e[0]})),profissionais:e.profissionais.map((function(e){return e[0]}))})):(localStorage.removeItem("token"),Se.push("/"))}))})).catch((function(e){console.log(e),t.selecao.get(0).then((function(e){console.log("dbload"),e?(ie(e.vacinas),le(e.lotes),te(e.grupos.map((function(e){return e[0]})).filter((function(e,t,a){return a.indexOf(e)===t})).sort()),he(e.locais),ve(e.profissionais)):alert("N\xe3o foi poss\xedvel conectar ao servidor, verifique sua conex\xe3o com a internet."),xe(!1)})).catch((function(e){console.log(e),alert("N\xe3o foi poss\xedvel conectar ao servidor, verifique sua conex\xe3o com a internet."),xe(!1)}))}))}else Se.push("/")}),[]);var Ce=function(e){b(e.target.value)},ke=function(e){S(e.target.value)},ye=function(e){R(e.target.value)},Ne=function(e){E(e.target.value)},De=function(e){z(e.target.value)},Pe=function(e){Z(e.target.value)};return Object(w.jsxs)("div",{children:[Object(w.jsx)(P.a,{className:t.backdrop,open:Oe,children:Object(w.jsx)(x.a,{color:"inherit"})}),Object(w.jsx)(g.a,{}),Object(w.jsx)($,{logoutButton:!0}),s===r.length?Object(w.jsxs)(h.a,{children:[Object(w.jsxs)("p",{children:["Dose: ",j]}),Object(w.jsxs)("p",{children:["Categoria: ",O]}),Object(w.jsxs)("p",{children:["Vacina: ",I]}),Object(w.jsxs)("p",{children:["Lote: ",_]}),Object(w.jsxs)("p",{children:["Local: ",V]}),Object(w.jsxs)("p",{children:["Profissional: ",X]}),Object(w.jsx)("div",{className:t.centerDiv,children:Object(w.jsx)(v.a,{variant:"contained",color:"primary",className:t.buttonConfirmar,onClick:function(e){Se.push("/cadastros",{dose:j,grupo:O,vacina:I,lote:_,local:V,profissional:X})},children:"Confirmar"})})]}):Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{style:{textAlign:"center"},children:function(e){switch(e){case 0:return Object(w.jsxs)(N.a,{className:t.formControl,children:[Object(w.jsx)(k.a,{id:"dose-select-label",children:"Dose"}),Object(w.jsx)(D.a,{labelId:"dose-select-label",id:"dose-select",value:j,onChange:Ce,children:q.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))})]});case 1:return Object(w.jsxs)(N.a,{className:t.formControl,children:[Object(w.jsx)(k.a,{id:"grupo-select-label",children:"Categoria"}),Object(w.jsx)(D.a,{labelId:"grupo-select-label",id:"grupo-select",value:O,onChange:ke,children:ee.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))})]});case 2:return Object(w.jsxs)(N.a,{className:t.formControl,children:[Object(w.jsx)(k.a,{id:"vacina-select-label",children:"Vacina"}),Object(w.jsx)(D.a,{labelId:"vacina-select-label",id:"vacina-select",value:I,onChange:ye,children:oe.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))})]});case 3:return Object(w.jsxs)(N.a,{className:t.formControl,children:[Object(w.jsx)(k.a,{id:"lote-select-label",children:"Lote"}),Object(w.jsx)(D.a,{labelId:"lote-select-label",id:"lote-select",value:_,onChange:Ne,children:re.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))})]});case 4:return Object(w.jsxs)(N.a,{className:t.formControl,children:[Object(w.jsx)(k.a,{id:"local-select-label",children:"Local"}),Object(w.jsx)(D.a,{labelId:"local-select-label",id:"local-select",value:V,onChange:De,children:pe.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))})]});case 5:return Object(w.jsxs)(N.a,{className:t.formControl,children:[Object(w.jsx)(k.a,{id:"profissional-select-label",children:"Profissional Respons\xe1vel"}),Object(w.jsx)(D.a,{labelId:"profissional-select-label",id:"profissional-select",value:X,onChange:Pe,children:fe.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))})]});default:return"Unknown step"}}(s)}),Object(w.jsx)(T.a,{variant:"dots",steps:r.length,position:"bottom",activeStep:s,nextButton:Object(w.jsx)(v.a,{disabled:""===we[s],variant:"contained",color:"primary",onClick:function(){c((function(e){return e+1}))},children:"Pr\xf3ximo"}),backButton:Object(w.jsx)(v.a,{disabled:0===s,onClick:function(){c((function(e){return e+-1}))},children:"Voltar"})})]})]})},z=a(183),G=a(171),M=a(124),X=a(184),Z=Object(O.a)((function(e){return{card:{marginTop:"20px"},buttonDiv:{position:"fixed",bottom:20,textAlign:"center",width:"100%"},buttonAdd:{width:"100px"},listDiv:{paddingBottom:"40px"},list:{maxHeight:"80vh",overflow:"auto"},progress:{color:"blue",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var H=function(e){var t=Z(),a=Object(n.useState)(),o=Object(p.a)(a,2),i=o[0],s=o[1],c=Object(n.useState)(),r=Object(p.a)(c,2),l=r[0],d=r[1],h=Object(n.useState)(),j=Object(p.a)(h,2),b=j[0],m=j[1],O=Object(n.useState)([]),S=Object(p.a)(O,2),C=S[0],k=S[1],y=Object(n.useState)(!1),N=Object(p.a)(y,2),D=N[0],P=N[1],T=Object(u.f)();return Object(n.useEffect)((function(){var t=localStorage.getItem("token");if(t)if(e.location.state){P(!0),s(e.location.state.grupo),d(e.location.state.vacina),m(e.location.state.lote);var a=new URLSearchParams;a.append("token",t),a.append("grupo",e.location.state.grupo),a.append("vacina",e.location.state.vacina),a.append("lote",e.location.state.lote),a.append("type","getListGrupoVacinaLote"),fetch("https://script.google.com/macros/s/AKfycbxkQf1wEUKHZoB6kbYA_YPHOioUhUAPiW2ctj83G83iNhuvTT9eig_-R38xZkui8Fk_OA/exec",{method:"post",redirect:"follow",body:a}).then((function(e){return e.json().then((function(e){console.log(e),P(!1),e.success?k(e.vacinacoesPaciente):(localStorage.removeItem("token"),T.push("/"))}))})).catch((function(e){console.log(e),P(!1),alert("N\xe3o foi poss\xedvel conectar ao servidor.")}))}else T.push("/selecao");else T.push("/")}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)(g.a,{}),Object(w.jsx)($,{backButton:!0,logoutButton:!0}),Object(w.jsxs)("div",{children:[Object(w.jsxs)(f.a,{variant:"h6",children:["Grupo: ",i]}),Object(w.jsxs)(f.a,{variant:"h6",children:["Vacina: ",l]}),Object(w.jsxs)(f.a,{variant:"h6",children:["Lote: ",b]})]}),Object(w.jsx)(z.a,{variant:"middle"}),Object(w.jsxs)("div",{className:t.listDiv,children:[Object(w.jsx)(f.a,{variant:"h6",children:"Registros de vacina\xe7ao"}),Object(w.jsx)(G.a,{dense:!0,className:t.list,children:C.map((function(e){return Object(w.jsx)(M.a,{button:!0,divider:!0,onClick:function(){return t=e[7],void T.push("/vacinar",{grupo:i,vacina:l,lote:b,cpf:t});var t},children:Object(w.jsx)(X.a,{primary:e[8],secondary:"CPF: "+(t=e[7],t.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"))})},e[7]);var t}))}),D&&Object(w.jsx)(x.a,{size:24,className:t.progress})]}),Object(w.jsx)("div",{className:t.buttonDiv,children:Object(w.jsx)(v.a,{variant:"contained",color:"primary",className:t.buttonAdd,onClick:function(){T.push("/vacinar",{grupo:i,vacina:l,lote:b})},children:"Adicionar"})})]})},K=a(127),q=a(77),Q=a.n(q),J=Object(O.a)((function(e){return{divCenter:{width:"100%",textAlign:"center"},tfCpf:{width:"90%"},button:{marginTop:"20px"},pacienteDiv:{paddingLeft:"20px"},buttonProgress:{color:"blue",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},wrapper:{margin:e.spacing(1),position:"relative"},paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var ee=function(e){var t=J(),a=Object(u.f)(),i=o.a.useState(!1),s=Object(p.a)(i,2),c=s[0],r=s[1],l=o.a.useState(!1),d=Object(p.a)(l,2),h=d[0],j=d[1],b=o.a.useState(!1),O=Object(p.a)(b,2),S=O[0],C=O[1],k=o.a.useState(),y=Object(p.a)(k,2),N=y[0],D=y[1],P=o.a.useState(),T=Object(p.a)(P,2),L=T[0],I=T[1],R=o.a.useState(),A=Object(p.a)(R,2),U=A[0],_=A[1],E=o.a.useState(),B=Object(p.a)(E,2),W=B[0],Y=B[1],V=o.a.useState(),G=Object(p.a)(V,2),M=G[0],X=G[1],Z=o.a.useState(),H=Object(p.a)(Z,2),q=H[0],ee=H[1],te=o.a.useState(),ae=Object(p.a)(te,2),ne=ae[0],oe=ae[1],ie=o.a.useState(),se=Object(p.a)(ie,2),ce=se[0],re=se[1],le=o.a.useState(),de=Object(p.a)(le,2),ue=de[0],pe=de[1],he=o.a.useState(),je=Object(p.a)(he,2),be=je[0],fe=je[1],ve=new Date,ge=o.a.useState(!1),me=Object(p.a)(ge,2),Oe=me[0],xe=me[1],we=o.a.useState(""),Se=Object(p.a)(we,2),Ce=Se[0],ke=Se[1],ye=o.a.useState(!1),Ne=Object(p.a)(ye,2),De=Ne[0],Pe=Ne[1];Object(n.useEffect)((function(){var t=localStorage.getItem("token"),n=localStorage.getItem("login");t&&n?(fe(n),e.location.state?(oe(e.location.state.grupo),re(e.location.state.vacina),pe(e.location.state.lote),e.location.state.cpf&&Te(null,e.location.state.cpf)):a.push("/selecao")):a.push("/")}),[]);var Te=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a?t=a:(e.preventDefault(),t=e.target.elements.cpf.value.replace(/\D/g,"")),!h){j(!0),C(!1);var n=new URLSearchParams;n.append("cpf",t),n.append("type","getPaciente"),fetch("https://script.google.com/macros/s/AKfycbxkQf1wEUKHZoB6kbYA_YPHOioUhUAPiW2ctj83G83iNhuvTT9eig_-R38xZkui8Fk_OA/exec",{method:"post",redirect:"follow",body:n}).then((function(e){return e.json().then((function(e){console.log(e),e.success?(D(e.paciente[0]),I(e.paciente[1]),_(e.paciente[2]),Y(e.paciente[3]),X(e.dose1[0]),ee(e.dose2[0]),r(!0)):C(!0),j(!1)}))}))}},Le=function(){xe(!0)},Ie=function(){xe(!1)},Re=Object(w.jsxs)("div",{style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},className:t.paper,children:[Object(w.jsxs)("h2",{id:"simple-modal-title",children:["Cadastrar ",Ce,"\xaa dose"]}),Object(w.jsxs)("div",{id:"simple-modal-description",children:[Object(w.jsxs)("p",{children:["Grupo: ",ne]}),Object(w.jsxs)("p",{children:["Vacina: ",ce]}),Object(w.jsxs)("p",{children:["Lote: ",ue]}),Object(w.jsxs)("p",{children:["Data: ",ve.toLocaleDateString()]}),Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(v.a,{variant:"contained",color:"primary",className:t.button,disabled:De,onClick:function(){if(!De){Pe(!0);var e=new URLSearchParams;e.append("login",be),e.append("cpf",N),e.append("time",ve),e.append("grupo",ne),e.append("vacina",ce),e.append("lote",ue),e.append("dose",Ce),e.append("type","setVacinacao"),fetch("https://script.google.com/macros/s/AKfycbxkQf1wEUKHZoB6kbYA_YPHOioUhUAPiW2ctj83G83iNhuvTT9eig_-R38xZkui8Fk_OA/exec",{method:"post",redirect:"follow",body:e}).then((function(e){return e.json().then((function(e){console.log(e),e.success?(1===Ce?X([be,N,ve,ne,ce,ue]):2===Ce&&ee([be,N,ve,ne,ce,ue]),Ie()):alert("Erro no cadastro"),Pe(!1),j(!1)}))})).catch((function(e){console.log(e.message);var t=new F.a("Vacinas");t.version(1).stores({vacinacoes:"login, cpf, time, grupo, vacina, lote, dose"}),t.vacinacoes.add({login:be,cpf:N,time:ve,grupo:ne,vacina:ce,lote:ue,dose:Ce}).then((function(e){"serviceWorker"in navigator&&"SyncManager"in window?navigator.serviceWorker.ready.then((function(e){return e.sync.register("sendVacinacao")})).catch((function(){alert("Erro no envio do registro de vacina\xe7\xe3o")})):alert("Erro no envio do registro de vacina\xe7\xe3o")}))}))}},children:"Confirmar"})})]})]});return Object(w.jsxs)("div",{children:[Object(w.jsx)(g.a,{}),Object(w.jsx)($,{backButton:!0,logoutButton:!0}),Object(w.jsxs)("div",{className:t.divCenter,children:[Object(w.jsx)(f.a,{variant:"h6",children:"Buscar paciente"}),Object(w.jsxs)("form",{onSubmit:Te,children:[Object(w.jsx)(m.a,{className:t.tfCpf,id:"cpf",label:"CPF",name:"cpf",inputProps:{maxLength:14},error:S,helperText:S?"CPF n\xe3o encontrado.":"",onChange:function(e){e.target.value=e.target.value.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")}}),Object(w.jsxs)("div",{className:t.wrapper,children:[Object(w.jsx)(v.a,{variant:"contained",color:"primary",className:t.button,startIcon:Object(w.jsx)(Q.a,{}),disabled:h,type:"submit",children:"Buscar"}),h&&Object(w.jsx)(x.a,{size:24,className:t.buttonProgress})]})]})]}),c?Object(w.jsxs)("div",{className:t.pacienteDiv,children:[Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Nome: ",L]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Data de nascimento: ",U]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Sexo: ",W]}),Object(w.jsx)(z.a,{}),Object(w.jsx)(f.a,{variant:"h6",children:"1\xaa Dose"}),M?Object(w.jsxs)("div",{children:[Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Data: ",new Date(M[2]).toLocaleDateString()]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Grupo: ",M[3]]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Vacina: ",M[4]]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Lote: ",M[5]]})]}):Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(v.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){ke(1),Le()},children:"Cadastrar 1\xaa Dose"})}),Object(w.jsx)(z.a,{}),Object(w.jsx)(f.a,{variant:"h6",children:"2\xaa Dose"}),q?Object(w.jsxs)("div",{children:[Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Data: ",new Date(q[2]).toLocaleDateString()]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Grupo: ",q[3]]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Vacina: ",q[4]]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Lote: ",q[5]]})]}):Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(v.a,{variant:"contained",color:"primary",className:t.button,onClick:function(){ke(2),Le()},children:"Cadastrar 2\xaa Dose"})})]}):null,Object(w.jsx)(K.a,{open:Oe,onClose:Ie,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Re})]})},te=a(66),ae=a(185),ne=a(122),oe=a(188),ie=a(186),se=a(187),ce=function(e){return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1")},re=function(e){return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{4})\d+?$/,"$1")},le=function(e){return e.replace(/\D/g,"").replace(/(\d{0})(\d)/,"$1($2").replace(/(\d{2})(\d)/,"$1)$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(\d{5})\d+?$/,"$1")},de=function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};function ue(e,t){var a=new Image;a.onload=function(){t.cxt.clearRect(0,0,this.width,this.height),t.cxt.drawImage(a,0,0)},a.src=e}(de.Canvas=function(e,t){this.canvas=e,this.cxt=e.getContext("2d"),this.cxt.lineCap="round",this.cxt.lineJoin="round",this.lineWidth=t||3,this.width=e.width,this.height=e.height,this.drawing=!1,this.handwritingX=[],this.handwritingY=[],this.trace=[],this.options={},this.step=[],this.redo_step=[],this.redo_trace=[],this.allowUndo=!1,this.allowRedo=!1,e.addEventListener("mousedown",this.mouseDown.bind(this)),e.addEventListener("mousemove",this.mouseMove.bind(this)),e.addEventListener("mouseup",this.mouseUp.bind(this)),e.addEventListener("touchstart",this.touchStart.bind(this)),e.addEventListener("touchmove",this.touchMove.bind(this)),e.addEventListener("touchend",this.touchEnd.bind(this)),this.callback=void 0,this.recognize=de.recognize}).prototype.set_Undo_Redo=function(e,t){this.allowUndo=e,this.allowRedo=!!e&&t,this.allowUndo||(this.step=[],this.redo_step=[],this.redo_trace=[])},de.Canvas.prototype.setLineWidth=function(e){this.lineWidth=e},de.Canvas.prototype.setCallBack=function(e){this.callback=e},de.Canvas.prototype.setOptions=function(e){this.options=e},de.Canvas.prototype.mouseDown=function(e){this.cxt.lineWidth=this.lineWidth,this.handwritingX=[],this.handwritingY=[],this.drawing=!0,this.cxt.beginPath();var t=this.canvas.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;this.cxt.moveTo(a,n),this.handwritingX.push(a),this.handwritingY.push(n)},de.Canvas.prototype.mouseMove=function(e){if(this.drawing){var t=this.canvas.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top;this.cxt.lineTo(a,n),this.cxt.stroke(),this.handwritingX.push(a),this.handwritingY.push(n)}},de.Canvas.prototype.mouseUp=function(){var e=[];e.push(this.handwritingX),e.push(this.handwritingY),e.push([]),this.trace.push(e),this.drawing=!1,this.allowUndo&&this.step.push(this.canvas.toDataURL())},de.Canvas.prototype.touchStart=function(e){e.preventDefault(),this.cxt.lineWidth=this.lineWidth,this.handwritingX=[],this.handwritingY=[];var t=document.documentElement,a=this.canvas.getBoundingClientRect(),n=a.top+window.pageYOffset-t.clientTop,o=a.left+window.pageXOffset-t.clientLeft,i=e.changedTouches[0],s=i.pageX-o,c=i.pageY-n;this.handwritingX.push(s),this.handwritingY.push(c),this.cxt.beginPath(),this.cxt.moveTo(s,c)},de.Canvas.prototype.touchMove=function(e){e.preventDefault();var t=e.targetTouches[0],a=document.documentElement,n=this.canvas.getBoundingClientRect(),o=n.top+window.pageYOffset-a.clientTop,i=n.left+window.pageXOffset-a.clientLeft,s=t.pageX-i,c=t.pageY-o;this.handwritingX.push(s),this.handwritingY.push(c),this.cxt.lineTo(s,c),this.cxt.stroke()},de.Canvas.prototype.touchEnd=function(e){var t=[];t.push(this.handwritingX),t.push(this.handwritingY),t.push([]),this.trace.push(t),this.allowUndo&&this.step.push(this.canvas.toDataURL())},de.Canvas.prototype.undo=function(){!this.allowUndo||this.step.length<=0||(1===this.step.length?this.allowRedo&&(this.redo_step.push(this.step.pop()),this.redo_trace.push(this.trace.pop()),this.cxt.clearRect(0,0,this.width,this.height)):(this.allowRedo?(this.redo_step.push(this.step.pop()),this.redo_trace.push(this.trace.pop())):(this.step.pop(),this.trace.pop()),ue(this.step.slice(-1)[0],this)))},de.Canvas.prototype.redo=function(){!this.allowRedo||this.redo_step.length<=0||(this.step.push(this.redo_step.pop()),this.trace.push(this.redo_trace.pop()),ue(this.step.slice(-1)[0],this))},de.Canvas.prototype.erase=function(){this.cxt.clearRect(0,0,this.width,this.height),this.step=[],this.redo_step=[],this.redo_trace=[],this.trace=[]},de.recognize=function(e,t,a){de.Canvas&&this instanceof de.Canvas?(e=this.trace,t=this.options,a=this.callback):t||(t={});var n=JSON.stringify({options:"enable_pre_space",requests:[{writing_guide:{writing_area_width:t.width||this.width||void 0,writing_area_height:t.height||this.width||void 0},ink:e,language:t.language||"zh_TW"}]}),o=new XMLHttpRequest;o.addEventListener("readystatechange",(function(){if(4===this.readyState)switch(this.status){case 200:var e,n=JSON.parse(this.responseText);1===n.length?a(void 0,new Error(n[0])):e=n[1][0][1],t.numOfWords&&(e=e.filter((function(e){return e.length===t.numOfWords}))),t.numOfReturn&&(e=e.slice(0,t.numOfReturn)),a(e,void 0);break;case 403:a(void 0,new Error("access denied"));break;case 503:a(void 0,new Error("can't connect to recognition server"));break;default:console.log("Status inv\xe1lido")}})),o.open("POST","https://www.google.com.tw/inputtools/request?ime=handwriting&app=mobilesearch&cs=1&oe=UTF-8"),o.setRequestHeader("content-type","application/json"),o.send(n)};var pe=de,he=Object(O.a)((function(e){return{btGroup:{marginTop:"10px"},canvas:{display:"block",width:"300px",height:"300px",border:"2px solid",cursor:"crosshair",marginTop:"10px",marginLeft:"auto",marginRight:"auto"}}}));var je=function(e){var t=he(),a=o.a.useRef(),i=o.a.useRef(),s=function(e,t){if(t)throw t;console.log(e)};return Object(n.useEffect)((function(){i.current=new pe.Canvas(a.current),i.current.setLineWidth(3),i.current.setOptions({language:"pt_BR"}),i.current.setCallBack(s),e.setCanvas(a)}),[]),Object(w.jsxs)("div",{children:[Object(w.jsx)("canvas",{ref:a,className:t.canvas,width:300,height:300}),Object(w.jsx)(v.a,{onClick:function(e){i.current.erase()},variant:"outlined",color:"primary",className:t.btGroup,children:"Apagar"})]})},be=a(78),fe=a.n(be),ve=(a(114),function(e){var t,a=0;if("00000000000"===(e=e.replace(/\D/g,"")))return!1;for(var n=1;n<=9;n++)a+=parseInt(e.substring(n-1,n))*(11-n);if(10!==(t=10*a%11)&&11!==t||(t=0),t!==parseInt(e.substring(9,10)))return!1;a=0;for(var o=1;o<=10;o++)a+=parseInt(e.substring(o-1,o))*(12-o);return 10!==(t=10*a%11)&&11!==t||(t=0),t===parseInt(e.substring(10,11))}),ge=function(e){if(!/^\d\d\/\d\d\/\d\d\d\d$/.test(e))return!1;var t=e.split("/").map((function(e){return parseInt(e,10)}));t[1]-=1;var a=new Date(t[2],t[1],t[0]);return a.getMonth()===t[1]&&a.getDate()===t[0]&&a.getFullYear()===t[2]},me=function(e){return e.replace(/\D/g,"").length>=10},Oe=function(e){var t=e.split("/").map((function(e){return parseInt(e,10)}));t[1]-=1;var a=new Date(t[2],t[1],t[0]),n=new Date,o=n.getFullYear()-a.getFullYear();return(n.getMonth()<a.getMonth()||n.getMonth()===a.getMonth()&&n.getDate()<a.getDate())&&(o-=1),o},xe=Object(O.a)((function(e){return{divCenter:{width:"100%",textAlign:"center"},btGroup:{paddingTop:"10px"},textField:{display:"block",width:"90%",maxWidth:"500px",marginLeft:"auto",marginRight:"auto"},canvas:{display:"block",width:"300px",height:"300px",border:"2px solid",cursor:"crosshair",marginTop:"10px",marginLeft:"auto",marginRight:"auto"},buttons:{position:"fixed",bottom:30,left:"50%",width:200,"margin-left":"-100px"},stepperDiv:{width:"100%"},stepper:{paddingLeft:0},keyboard:{position:"absolute",width:"100%",bottom:0},kbTheme:{fontSize:"23px"},error:{color:"red"},progress:{color:"blue",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formControl:{margin:e.spacing(1),width:"90%"},dados:{marginBottom:80}}}));var we=function(e){var t=xe(),a=Object(u.f)(),i=o.a.useState(""),s=Object(p.a)(i,2),c=s[0],r=s[1],l=o.a.useState(""),d=Object(p.a)(l,2),h=d[0],j=d[1],b=o.a.useState(""),g=Object(p.a)(b,2),O=g[0],S=g[1],C=o.a.useState(""),P=Object(p.a)(C,2),T=P[0],_=P[1],E=o.a.useState(!1),B=Object(p.a)(E,2),W=B[0],Y=B[1],V=o.a.useState(!1),z=Object(p.a)(V,2),G=z[0],M=z[1],X=o.a.useState(!1),Z=Object(p.a)(X,2),H=Z[0],K=Z[1],q=o.a.useState(!1),Q=Object(p.a)(q,2),J=Q[0],ee=Q[1],de=o.a.useState(),ue=Object(p.a)(de,2),pe=ue[0],he=ue[1],be=o.a.useState(),we=Object(p.a)(be,2),Se=we[0],Ce=we[1],ke=o.a.useState(0),ye=Object(p.a)(ke,2),Ne=ye[0],De=ye[1],Pe=["CPF","Nome","Data de nascimento","Telefone","Assinatura","Grupo"],Te=[h,O,c],Le=o.a.useRef(),Ie=o.a.useState("numericCPF"),Re=Object(p.a)(Ie,2),Ae=Re[0],Ue=Re[1],_e=o.a.useState("nameCpf"),Ee=Object(p.a)(_e,2),Be=Ee[0],We=Ee[1],$e=o.a.useState(!1),Fe=Object(p.a)($e,2),Ye=Fe[0],Ve=Fe[1],ze=o.a.useState(),Ge=Object(p.a)(ze,2),Me=Ge[0],Xe=Ge[1],Ze=o.a.useState(!1),He=Object(p.a)(Ze,2),Ke=He[0],qe=He[1],Qe=Object(ae.a)("(min-height:590px)"),Je=o.a.useState(""),et=Object(p.a)(Je,2),tt=et[0],at=et[1],nt=o.a.useState(!1),ot=Object(p.a)(nt,2),it=ot[0],st=ot[1],ct=o.a.useState([]),rt=Object(p.a)(ct,2),lt=rt[0],dt=rt[1],ut=new F.a("Cadastros");ut.version(3).stores({cadastros:"++id, cpf, status",selecao:"++id"}),Object(n.useEffect)((function(){var t=localStorage.getItem("token");t?e.location.state?(Xe(t),ut.selecao.get(0).then((function(t){var a=t.grupos.filter((function(t){return t[0]===e.location.state.grupo})).map((function(e){return e[1]})).sort();dt(a)}))):a.push("/selecao"):a.push("/")}),[]);var pt=function(e){var t=e.target.value.replace(/[^A-Z\xc7 ]/g,"");j(t),Le.current.setInput(t)},ht=function(e){Le.current.setInput(e.target.value),e.target.value=ce(e.target.value),14!==e.target.value.length||ve(e.target.value)?(e.target.value.length<14||ve(e.target.value))&&M(!1):M(!0),r(e.target.value)},jt=function(e){Le.current.setInput(e.target.value),e.target.value=re(e.target.value),10!==e.target.value.length||ge(e.target.value)?(e.target.value.length<10||ge(e.target.value))&&K(!1):K(!0),S(e.target.value)},bt=function(e){Le.current.setInput(e.target.value),e.target.value=le(e.target.value),10!==e.target.value.length||me(e.target.value)?(e.target.value.length<10||me(e.target.value))&&ee(!1):ee(!0),_(e.target.value)},ft=function(){if(0!==Ne||ve(c))if(1!==Ne||h)if(2!==Ne||ge(O))if(3!==Ne||me(T)){if(4===Ne&&("Segunda"===e.location.state.dose||"Terceira"===e.location.state.dose))return Ce(pe.current.toDataURL("image/png").split(";base64,")[1]),void De((function(e){return e+2}));5!==Ne||tt?(0===Ne?Ue("default"):1===Ne||2===Ne?Ue("numericDn"):4===Ne&&(Ce(pe.current.toDataURL("image/png").split(";base64,")[1]),"Faixa Et\xe1ria"===e.location.state.grupo&&at(function(e){var t=Oe(e);return t>=18&&t<=64?"Pessoas de 18 a 64 anos":t>64&&t<=69?"Pessoas de 65 a 69 anos":t>69&&t<=74?"Pessoas de 70 a 74 anos":t>74&&t<=79?"Pessoas de 75 a 79 anos":t>=80?"Pessoas de 80 anos ou mais":""}(O))),We(gt(Ne+1)),De((function(e){return e+1}))):st(!0)}else ee(!0);else K(!0);else Y(!0);else M(!0)},vt=function(){We(gt(Ne-1)),1===Ne&&Ue("numericCPF"),2===Ne&&Ue("default"),3===Ne&&Ue("numericDn"),4===Ne&&Ue("numericDn"),6!==Ne||"Segunda"!==e.location.state.dose&&"Terceira"!==e.location.state.dose?De((function(e){return e-1})):De((function(e){return e-2}))},gt=function(e){switch(e){case 0:return"nameCpf";case 1:return"nameInput";case 2:return"nameDn";case 3:return"nameTelefone"}},mt=function(){console.log(Ae);var e="default"===Ae?"shift":"default";console.log(e),Ue(e)},Ot=function(){Ve(!1)},xt=function(e){at(e.target.value),st(!1)};return Object(w.jsxs)("div",{children:[Object(w.jsx)($,{backButton:!0,logoutButton:!0}),Qe&&Object(w.jsx)("div",{className:t.stepperDiv,children:Object(w.jsx)(oe.a,{activeStep:Ne,alternativeLabel:!0,className:t.stepper,children:Pe.map((function(e,t){return Object(w.jsx)(ie.a,Object(te.a)(Object(te.a)({},{}),{},{children:Object(w.jsx)(se.a,{children:e})}),e)}))})}),Ne===Pe.length?Object(w.jsxs)("div",{className:t.dados,children:[Object(w.jsxs)(f.a,{children:["Dose: ",e.location.state.dose]}),Object(w.jsxs)(f.a,{children:["Vacina: ",e.location.state.vacina]}),Object(w.jsxs)(f.a,{children:["Lote: ",e.location.state.lote]}),Object(w.jsxs)(f.a,{children:["Categoria: ",e.location.state.grupo]}),Object(w.jsxs)(f.a,{children:["Grupo: ",tt]}),Object(w.jsxs)(f.a,{children:["Local: ",e.location.state.local]}),Object(w.jsxs)(f.a,{children:["Profissional: ",e.location.state.profissional]}),Object(w.jsxs)(f.a,{children:["CPF: ",ve(c)?c:Object(w.jsx)("span",{className:t.error,children:"CPF inv\xe1lido"})]}),Object(w.jsxs)(f.a,{children:["Nome: ",h||Object(w.jsx)("span",{className:t.error,children:"N\xe3o preenchido"})]}),Object(w.jsxs)(f.a,{children:["Data de Nascimento: ",ge(O)?O:Object(w.jsx)("span",{className:t.error,children:"Data inv\xe1lida"})]}),Object(w.jsxs)(f.a,{children:["Idade: ",ge(O)?Oe(O)+" anos":Object(w.jsx)("span",{className:t.error,children:"Data inv\xe1lida"})]}),Object(w.jsxs)(f.a,{children:["Telefone: ",me(T)?T:Object(w.jsx)("span",{className:t.error,children:"Telefone inv\xe1lido"})]}),Object(w.jsxs)(f.a,{children:["Assinatura: ",!Se&&Object(w.jsx)("span",{className:t.error,children:"N\xe3o assinado"})]}),Object(w.jsx)("div",{children:Se&&Object(w.jsx)("img",{src:"data:image/png;base64,"+Se,alt:"assinatura",width:100})}),Object(w.jsxs)("div",{className:t.buttons,children:[Object(w.jsx)(v.a,{disabled:Ke,onClick:vt,children:"Voltar"}),Object(w.jsx)(v.a,{disabled:Ke,variant:"contained",color:"primary",className:t.button,onClick:function(){var t;h&&ge(O)&&ve(c)&&Se&&(tt||"Segunda"===e.location.state.dose||"Terceira"===e.location.state.dose)?(qe(!0),(t="pend",ut.cadastros.add({nome:h,dn:O,cpf:c,telefone:T,assinatura:Se,vacina:e.location.state.vacina,lote:e.location.state.lote,grupo:e.location.state.grupo,dose:e.location.state.dose,local:e.location.state.local,profissional:e.location.state.profissional,subgrupo:tt,time:new Date(Date.now()).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo"}),status:t,token:Me})).then((function(t){var n=new URLSearchParams;n.append("token",Me),n.append("nome",h),n.append("dn",O),n.append("cpf",c),n.append("telefone",T),n.append("type","setCadastro"),n.append("assinatura",Se),n.append("vacina",e.location.state.vacina),n.append("lote",e.location.state.lote),n.append("grupo",e.location.state.grupo),n.append("dose",e.location.state.dose),n.append("local",e.location.state.local),n.append("profissional",e.location.state.profissional),n.append("subgrupo",tt),n.append("time",new Date(Date.now()).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo"})),fetch("https://script.google.com/macros/s/AKfycbxkQf1wEUKHZoB6kbYA_YPHOioUhUAPiW2ctj83G83iNhuvTT9eig_-R38xZkui8Fk_OA/exec",{method:"post",redirect:"follow",body:n}).then((function(n){n.json().then((function(n){var o;n.success?(o=t,ut.cadastros.update(o,{status:"ok"}),qe(!1),a.push("/cadastros",{vacina:e.location.state.vacina,lote:e.location.state.lote,grupo:e.location.state.grupo,dose:e.location.state.dose,local:e.location.state.local,profissional:e.location.state.profissional})):alert("N\xe3o foi poss\xedvel enviar o cadastro.")}))})).catch((function(t){console.log(t),"serviceWorker"in navigator&&"SyncManager"in window?navigator.serviceWorker.ready.then((function(t){return qe(!1),a.push("/cadastros",{vacina:e.location.state.vacina,lote:e.location.state.lote,grupo:e.location.state.grupo,dose:e.location.state.dose,local:e.location.state.local,profissional:e.location.state.profissional}),t.sync.register("sendCadastros")})).catch((function(e){qe(!1),alert("N\xe3o foi poss\xedvel armazenar o cadastro no dispositivo. Sincronia em plano de fundo n\xe3o dispon\xedvel.")})):(qe(!1),alert("N\xe3o foi poss\xedvel armazenar o cadastro no dispositivo. Service Worker n\xe3o dispon\xedvel."))}))})).catch((function(e){qe(!1),alert("N\xe3o foi poss\xedvel armazenar o cadastro no dispositivo.")}))):Ve(!0)},children:"Confirmar"}),Ke&&Object(w.jsx)(x.a,{size:24,className:t.progress})]})]}):Object(w.jsx)("div",{children:Object(w.jsx)("div",{style:{textAlign:"center"},children:function(e){switch(e){case 0:return Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(m.a,{error:G,fullWidth:!0,id:"cpfInput",className:t.textField,label:"CPF",helperText:G?"CPF inv\xe1lido.":"",inputProps:{inputMode:"none",style:{fontSize:"23px"}},onChange:ht,value:c})});case 1:return Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(m.a,{error:W,fullWidth:!0,id:"nameInput",className:t.textField,label:"Nome",helperText:W?"Nome inv\xe1lido.":"",value:h,inputProps:{inputMode:"none",style:{fontSize:"23px"}},onChange:pt})});case 2:return Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(m.a,{error:H,fullWidth:!0,id:"dnInput",className:t.textField,label:"Data de Nascimento",helperText:H?"Data inv\xe1lida.":"",inputProps:{inputMode:"none",style:{fontSize:"23px"}},onChange:jt,value:O})});case 3:return Object(w.jsx)("div",{className:t.divCenter,children:Object(w.jsx)(m.a,{error:J,fullWidth:!0,id:"telefoneInput",className:t.textField,label:"Telefone",helperText:J?"Telefone inv\xe1lido.":"",inputProps:{inputMode:"none",style:{fontSize:"23px"}},onChange:bt,value:T})});case 4:return Object(w.jsxs)("div",{className:t.divCenter,children:[Object(w.jsx)(je,{setCanvas:he}),Object(w.jsxs)("div",{className:t.buttons,children:[Object(w.jsx)(v.a,{disabled:0===Ne,onClick:vt,children:"Voltar"}),Object(w.jsx)(v.a,{disabled:""===Te[Ne],variant:"contained",color:"primary",onClick:ft,children:"Pr\xf3ximo"})]})]});case 5:return Object(w.jsxs)("div",{className:t.divCenter,children:[Object(w.jsxs)(N.a,{className:t.formControl,error:it,children:[Object(w.jsx)(k.a,{id:"vacina-select-label",children:"Grupo de atendimento"}),Object(w.jsx)(D.a,{labelId:"vacina-select-label",id:"vacina-select",value:tt,onChange:xt,children:lt.map((function(e){return Object(w.jsx)(y.a,{value:e,children:e},e)}))}),it&&Object(w.jsx)(ne.a,{children:"Selecione o grupo"})]}),Object(w.jsxs)("div",{className:t.buttons,children:[Object(w.jsx)(v.a,{disabled:0===Ne,onClick:vt,children:"Voltar"}),Object(w.jsx)(v.a,{disabled:""===Te[Ne],variant:"contained",color:"primary",onClick:ft,children:"Pr\xf3ximo"})]})]});default:return"Unknown step"}}(Ne)})}),Ne<4&&Object(w.jsx)("div",{className:t.keyboard,children:Object(w.jsx)(fe.a,{layout:{shift:["q w e r t y u i o p","a s d f g h j k l \xe7","z x c v b n m {backspace}","{shift} {space} {prox}"],default:["Q W E R T Y U I O P","A S D F G H J K L \xc7","Z X C V B N M {backspace}","{volt} {space} {prox}"],numericCPF:["1 2 3","4 5 6","7 8 9","0 {backspace}","{prox}"],numericDn:["1 2 3","4 5 6","7 8 9","0 {backspace}","{volt} {prox}"]},display:{"{shift}":"\u21e7","{prox}":"Pr\xf3ximo","{volt}":"Voltar","{space}":" ","{backspace}":"\u232b"},buttonAttributes:[{attribute:"style",value:"flex-basis:68%",buttons:"{space} 0"}],theme:t.kbTheme+" hg-theme-default",layoutName:Ae,keyboardRef:function(e){return Le.current=e},onChange:function(e){switch(Ne){case 0:var t=ce(e);14!==t.length||ve(t)?(t.length<14||ve(t))&&M(!1):M(!0),r(t);break;case 1:j(e.replace(/[^A-Z\xc7 ]/g,""));break;case 2:var a=re(e);10!==a.length||ge(a)?(a.length<10||ge(a))&&K(!1):K(!0),S(a);break;case 3:var n=le(e);n.length>=12&&!me(n)?ee(!0):(n.length<12||me(n))&&ee(!1),_(n)}},onKeyPress:function(e){switch(e){case"{prox}":ft();break;case"{volt}":vt();break;case"{shift}":mt()}},onInit:function(e){e.setInput(c.replace(/\D/g,""),"nameCpf"),e.setInput(h,"nameInput"),e.setInput(O.replace(/\D/g,""),"nameDn"),e.setInput(T.replace(/\D/g,""),"nameTelefone")},inputName:Be,useMouseEvents:!0})}),Object(w.jsxs)(L.a,{open:Ye,onClose:Ot,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(w.jsx)(I.a,{id:"alert-dialog-title",children:"Erro no cadastro"}),Object(w.jsx)(R.a,{children:Object(w.jsx)(A.a,{id:"alert-dialog-description",children:"Informe CPF, nome, data de nascimento, telefone e assinatura."})}),Object(w.jsx)(U.a,{children:Object(w.jsx)(v.a,{onClick:Ot,color:"primary",children:"OK"})})]})]})},Se=a(65),Ce=a.n(Se),ke=a(79),ye=Object(O.a)((function(e){return{list:{paddingBottom:"100px"},progress:{color:"blue",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonDiv:{position:"fixed",bottom:20,textAlign:"center",width:"100%"}}}));var Ne=function(e){var t=ye(),a=Object(u.f)(),i=o.a.useState([]),s=Object(p.a)(i,2),c=s[0],r=s[1],l=o.a.useState(!1),d=Object(p.a)(l,2),h=d[0],j=d[1],b=o.a.useState(0),g=Object(p.a)(b,2),m=g[0],O=g[1],S=o.a.useState(0),C=Object(p.a)(S,2),k=C[0],y=C[1],N=new F.a("Cadastros");N.version(3).stores({cadastros:"++id, cpf, status",selecao:"++id"}),Object(n.useEffect)((function(){e.location.state?D():a.push("/selecao")}),[]);var D=function(){var e=Object(ke.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,N.cadastros.toArray();case 3:t=e.sent,r(t),O(t.length),y(t.filter((function(e){return"ok"===e.status})).length),j(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{children:[Object(w.jsx)($,{logoutButton:!0,backButton:!0}),Object(w.jsxs)("div",{children:[Object(w.jsx)(f.a,{variant:"h6",children:"Registros"}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Registrados: ",m]}),Object(w.jsxs)(f.a,{variant:"subtitle1",children:["Enviados: ",k]}),Object(w.jsx)(G.a,{dense:!0,className:t.list,children:c.map((function(e){return Object(w.jsx)(M.a,{button:!0,divider:!0,children:Object(w.jsx)(X.a,{primary:e.nome,secondary:"CPF: "+e.cpf+" - "+("ok"===e.status?"Enviado":"Pendente")})},e.id)}))}),h&&Object(w.jsx)(x.a,{size:24,className:t.progress})]}),Object(w.jsx)("div",{className:t.buttonDiv,children:Object(w.jsx)(v.a,{variant:"contained",color:"primary",onClick:function(){a.push("/novocadastro",{vacina:e.location.state.vacina,lote:e.location.state.lote,grupo:e.location.state.grupo,dose:e.location.state.dose,local:e.location.state.local,profissional:e.location.state.profissional})},children:"Adicionar"})})]})},De=function(){return Object(w.jsxs)(u.c,{children:[Object(w.jsx)(u.a,{path:"/",component:C,exact:!0}),Object(w.jsx)(u.a,{path:"/selecao",component:V}),Object(w.jsx)(u.a,{path:"/listavacinados",component:H}),Object(w.jsx)(u.a,{path:"/vacinar",component:ee}),Object(w.jsx)(u.a,{path:"/cadastros",component:Ne}),Object(w.jsx)(u.a,{path:"/novocadastro",component:we})]})};s.a.render(Object(w.jsx)(d.a,{children:Object(w.jsx)(De,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):r(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):r(t,e)}))}}(),l()}},[[116,1,2]]]);
//# sourceMappingURL=main.e0131b1e.chunk.js.map